<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Customer Login System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-card {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button {
            background: #3b82f6;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #2563eb;
        }
        .success { color: #059669; }
        .error { color: #dc2626; }
        .info { color: #0891b2; }
    </style>
</head>
<body>
    <h1>🔐 Customer Login System Test</h1>
    
    <div class="test-card">
        <h2>🧪 Test Scenarios</h2>
        
        <h3>1. Test Demo Login</h3>
        <p>Test login dengan demo account yang sudah disediakan.</p>
        <button class="button" onclick="testDemoLogin()">Go to Demo Login</button>
        
        <h3>2. Test Logout → Login Flow</h3>
        <p>Setup dashboard, logout, kemudian test login kembali.</p>
        <button class="button" onclick="setupDashboardTest()">Setup Dashboard</button>
        <button class="button" onclick="testLogoutFlow()">Test Logout Flow</button>
        
        <h3>3. Test Direct Login Access</h3>
        <p>Akses langsung ke halaman login.</p>
        <button class="button" onclick="directLoginAccess()">Go to Login Page</button>
        
        <h3>4. Test Navbar Login Button</h3>
        <p>Test login button di navbar.</p>
        <button class="button" onclick="testNavbarLogin()">Go to Home (Check Navbar)</button>
    </div>
    
    <div class="test-card">
        <h2>📋 Test Checklist</h2>
        <div id="checklist">
            <p>Run tests above and check these items:</p>
            <ul>
                <li>✅ Login page loads at /login</li>
                <li>✅ Demo credentials work (demo@sentrabase.com / demo123)</li>
                <li>✅ Form validation works (email format, password length)</li>
                <li>✅ Loading states show during login</li>
                <li>✅ Success message appears</li>
                <li>✅ Redirects to dashboard after login</li>
                <li>✅ Logout button shows confirmation</li>
                <li>✅ Logout redirects to login page</li>
                <li>✅ Navbar has "Customer Login" button</li>
                <li>✅ Dashboard is protected (redirects if not authenticated)</li>
            </ul>
        </div>
    </div>
    
    <div class="test-card">
        <h2>🔧 Debug Tools</h2>
        <button class="button" onclick="checkLoginData()">Check Login Data</button>
        <button class="button" onclick="clearAllData()">Clear All Data</button>
        <button class="button" onclick="showCurrentPath()">Show Current Path</button>
        
        <div id="debug-output" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script>
        // Test Functions
        function testDemoLogin() {
            console.log('🧪 Testing demo login...');
            window.location.href = '/login';
        }
        
        function setupDashboardTest() {
            console.log('🧪 Setting up dashboard test...');
            
            const testData = {
                customerName: "Dr. Test User",
                email: "test@sentrabase.com",
                phone: "081234567890",
                clinicName: "Test Clinic SentraBASE",
                plan: {
                    name: "Professional",
                    price: 5000000,
                    features: ["EMR System", "Appointment Management", "Billing System"]
                },
                amount: 5000000,
                orderId: "ORDER-" + Date.now(),
                transactionId: "TXN-" + Date.now(),
                registrationCompleted: true,
                accountCreated: true,
                setupDate: new Date().toISOString()
            };
            
            localStorage.setItem('sentrabase_payment_data', JSON.stringify(testData));
            
            updateDebugOutput('✅ Dashboard test data setup complete');
            console.log('✅ Test data stored:', testData);
        }
        
        function testLogoutFlow() {
            console.log('🧪 Testing logout flow...');
            
            // First go to dashboard
            window.location.href = '/dashboard';
            
            updateDebugOutput('🧭 Redirecting to dashboard. Click logout button to test flow.');
        }
        
        function directLoginAccess() {
            console.log('🧪 Testing direct login access...');
            window.location.href = '/login';
        }
        
        function testNavbarLogin() {
            console.log('🧪 Testing navbar login button...');
            window.location.href = '/';
            
            updateDebugOutput('🏠 Go to home page and look for "Customer Login" button in navbar');
        }
        
        // Debug Functions
        function checkLoginData() {
            const data = localStorage.getItem('sentrabase_payment_data');
            
            if (data) {
                const parsed = JSON.parse(data);
                updateDebugOutput('📊 Current login data: ' + JSON.stringify(parsed, null, 2));
                console.log('📊 Login data:', parsed);
            } else {
                updateDebugOutput('❌ No login data found');
                console.log('❌ No login data in localStorage');
            }
        }
        
        function clearAllData() {
            localStorage.removeItem('sentrabase_payment_data');
            updateDebugOutput('🧹 All data cleared');
            console.log('🧹 localStorage cleared');
        }
        
        function showCurrentPath() {
            const path = window.location.pathname;
            updateDebugOutput('🧭 Current path: ' + path);
            console.log('🧭 Current path:', path);
        }
        
        function updateDebugOutput(message) {
            const output = document.getElementById('debug-output');
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML = `[${timestamp}] ${message}`;
        }
        
        // Auto-check on load
        window.onload = function() {
            showCurrentPath();
            
            // Show instructions based on current path
            const path = window.location.pathname;
            if (path === '/login') {
                updateDebugOutput('🔐 You are on login page. Test demo credentials: demo@sentrabase.com / demo123');
            } else if (path === '/dashboard') {
                updateDebugOutput('📊 You are on dashboard. Test logout button.');
            } else {
                updateDebugOutput('🏠 You are on home page. Check navbar for "Customer Login" button.');
            }
        };
        
        console.log('🧪 Customer Login System Test loaded');
        console.log('📋 Available test functions:', {
            testDemoLogin,
            setupDashboardTest,
            testLogoutFlow,
            directLoginAccess,
            testNavbarLogin,
            checkLoginData,
            clearAllData,
            showCurrentPath
        });
    </script>
</body>
</html>
